"use client";
"use strict";
import{l as e}from"../../../../_virtual/link.js";import"../../../@swc/helpers/cjs/_interop_require_default.cjs.js";import"../../../react/jsx-runtime.js";import"../../../react/index.js";import"./resolve-href.js";import"../shared/lib/router/utils/is-local-url.js";import"../shared/lib/router/utils/format-url.js";import"../shared/lib/utils.js";import"./add-locale.js";import"../shared/lib/router-context.shared-runtime.js";import"../shared/lib/app-router-context.shared-runtime.js";import"./use-intersection.js";import"./get-domain-locale.js";import"./add-base-path.js";import"./components/router-reducer/router-reducer-types.js";import{__exports as t}from"../../../../_virtual/router-context.shared-runtime.js";import{__exports as o}from"../../../../_virtual/_interop_require_default.cjs.js";import{__exports as r}from"../../../../_virtual/is-local-url.js";import{j as s}from"../../../../_virtual/jsx-runtime.js";import{r as n}from"../../../../_virtual/index.js";import{r as i}from"../../../../_virtual/resolve-href.js";import{u as l}from"../../../../_virtual/utils.js";import{a}from"../../../../_virtual/add-locale.js";import{a as c}from"../../../../_virtual/app-router-context.shared-runtime.js";import{u}from"../../../../_virtual/use-intersection.js";import{g as p}from"../../../../_virtual/get-domain-locale.js";import{a as f}from"../../../../_virtual/add-base-path.js";import{r as d}from"../../../../_virtual/router-reducer-types.js";import{f as h}from"../../../../_virtual/format-url.js";!function(e,m){Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"default",{enumerable:!0,get:function(){return D}});const v=o,y=s.exports,j=v._(n.exports),w=i.exports,_=r,x=h.exports,b=l.exports,g=a.exports,k=t,E=c.exports,C=u.exports,N=p.exports,L=f.exports,O=d.exports,T=new Set;function M(e,t,o,r,s,n){if("undefined"==typeof window)return;if(!n&&!(0,_.isLocalURL)(t))return;if(!r.bypassPrefetchedCheck){const s=t+"%"+o+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(T.has(s))return;T.add(s)}const i=n?e.prefetch(t,s):e.prefetch(t,o,r);Promise.resolve(i).catch((e=>{if("production"!==process.env.NODE_ENV)throw e}))}function P(e){return"string"==typeof e?e:(0,x.formatUrl)(e)}const D=j.default.forwardRef((function(e,t){let o;const{href:r,as:s,children:n,prefetch:i=null,passHref:l,replace:a,shallow:c,scroll:u,locale:p,onClick:f,onMouseEnter:d,onTouchStart:h,legacyBehavior:m=!1,...v}=e;o=n,!m||"string"!=typeof o&&"number"!=typeof o||(o=(0,y.jsx)("a",{children:o}));const x=j.default.useContext(k.RouterContext),T=j.default.useContext(E.AppRouterContext),D=null!=x?x:T,R=!x,S=!1!==i,U=null===i?O.PrefetchKind.AUTO:O.PrefetchKind.FULL;if("production"!==process.env.NODE_ENV){function G(e){return new Error("Failed prop type: The prop `"+e.key+"` expects a "+e.expected+" in `<Link>`, but got `"+e.actual+"` instead."+("undefined"!=typeof window?"\nOpen your browser's console to view the Component stack trace.":""))}const J={href:!0};Object.keys(J).forEach((t=>{if("href"===t&&(null==e[t]||"string"!=typeof e[t]&&"object"!=typeof e[t]))throw G({key:t,expected:"`string` or `object`",actual:null===e[t]?"null":typeof e[t]})}));const Q={as:!0,replace:!0,scroll:!0,shallow:!0,passHref:!0,prefetch:!0,locale:!0,onClick:!0,onMouseEnter:!0,onTouchStart:!0,legacyBehavior:!0};Object.keys(Q).forEach((t=>{const o=typeof e[t];if("as"===t){if(e[t]&&"string"!==o&&"object"!==o)throw G({key:t,expected:"`string` or `object`",actual:o})}else if("locale"===t){if(e[t]&&"string"!==o)throw G({key:t,expected:"`string`",actual:o})}else if("onClick"===t||"onMouseEnter"===t||"onTouchStart"===t){if(e[t]&&"function"!==o)throw G({key:t,expected:"`function`",actual:o})}else if(("replace"===t||"scroll"===t||"shallow"===t||"passHref"===t||"prefetch"===t||"legacyBehavior"===t)&&null!=e[t]&&"boolean"!==o)throw G({key:t,expected:"`boolean`",actual:o})}));const Y=j.default.useRef(!1);!e.prefetch||Y.current||R||(Y.current=!0,console.warn("Next.js auto-prefetches automatically based on viewport. The prefetch attribute is no longer needed. More: https://nextjs.org/docs/messages/prefetch-true-deprecated"))}if("production"!==process.env.NODE_ENV&&R&&!s){let Z;if("string"==typeof r?Z=r:"object"==typeof r&&"string"==typeof r.pathname&&(Z=r.pathname),Z){if(Z.split("/").some((e=>e.startsWith("[")&&e.endsWith("]"))))throw new Error("Dynamic href `"+Z+"` found in <Link> while using the `/app` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href")}}const{href:V,as:B}=j.default.useMemo((()=>{if(!x){const e=P(r);return{href:e,as:s?P(s):e}}const[e,t]=(0,w.resolveHref)(x,r,!0);return{href:e,as:s?(0,w.resolveHref)(x,s):t||e}}),[x,r,s]),K=j.default.useRef(V),A=j.default.useRef(B);let H;if(m)if("development"===process.env.NODE_ENV){f&&console.warn('"onClick" was passed to <Link> with `href` of `'+r+'` but "legacyBehavior" was set. The legacy behavior requires onClick be set on the child of next/link'),d&&console.warn('"onMouseEnter" was passed to <Link> with `href` of `'+r+'` but "legacyBehavior" was set. The legacy behavior requires onMouseEnter be set on the child of next/link');try{H=j.default.Children.only(o)}catch($){if(!o)throw new Error("No children were passed to <Link> with `href` of `"+r+"` but one child is required https://nextjs.org/docs/messages/link-no-children");throw new Error("Multiple children were passed to <Link> with `href` of `"+r+"` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children"+("undefined"!=typeof window?" \nOpen your browser's console to view the Component stack trace.":""))}}else H=j.default.Children.only(o);else if("development"===process.env.NODE_ENV&&"a"===(null==o?void 0:o.type))throw new Error("Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor");const q=m?H&&"object"==typeof H&&H.ref:t,[I,F,W]=(0,C.useIntersection)({rootMargin:"200px"}),X=j.default.useCallback((e=>{A.current===B&&K.current===V||(W(),A.current=B,K.current=V),I(e),q&&("function"==typeof q?q(e):"object"==typeof q&&(q.current=e))}),[B,q,V,W,I]);j.default.useEffect((()=>{"production"===process.env.NODE_ENV&&D&&F&&S&&M(D,V,B,{locale:p},{kind:U},R)}),[B,V,F,p,S,null==x?void 0:x.locale,D,R,U]);const z={ref:X,onClick(e){if("production"!==process.env.NODE_ENV&&!e)throw new Error('Component rendered inside next/link has to pass click event to "onClick" prop.');m||"function"!=typeof f||f(e),m&&H.props&&"function"==typeof H.props.onClick&&H.props.onClick(e),D&&(e.defaultPrevented||function(e,t,o,r,s,n,i,l,a){const{nodeName:c}=e.currentTarget;if("A"===c.toUpperCase()&&(function(e){const t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!a&&!(0,_.isLocalURL)(o)))return;e.preventDefault();const u=()=>{const e=null==i||i;"beforePopState"in t?t[s?"replace":"push"](o,r,{shallow:n,locale:l,scroll:e}):t[s?"replace":"push"](r||o,{scroll:e})};a?j.default.startTransition(u):u()}(e,D,V,B,a,c,u,p,R))},onMouseEnter(e){m||"function"!=typeof d||d(e),m&&H.props&&"function"==typeof H.props.onMouseEnter&&H.props.onMouseEnter(e),D&&(S&&"development"!==process.env.NODE_ENV||!R)&&M(D,V,B,{locale:p,priority:!0,bypassPrefetchedCheck:!0},{kind:U},R)},onTouchStart:process.env.__NEXT_LINK_NO_TOUCH_START?void 0:function(e){m||"function"!=typeof h||h(e),m&&H.props&&"function"==typeof H.props.onTouchStart&&H.props.onTouchStart(e),D&&(!S&&R||M(D,V,B,{locale:p,priority:!0,bypassPrefetchedCheck:!0},{kind:U},R))}};if((0,b.isAbsoluteUrl)(B))z.href=B;else if(!m||l||"a"===H.type&&!("href"in H.props)){const ee=void 0!==p?p:null==x?void 0:x.locale,te=(null==x?void 0:x.isLocaleDomain)&&(0,N.getDomainLocale)(B,ee,null==x?void 0:x.locales,null==x?void 0:x.domainLocales);z.href=te||(0,L.addBasePath)((0,g.addLocale)(B,ee,null==x?void 0:x.defaultLocale))}return m?j.default.cloneElement(H,z):(0,y.jsx)("a",{...v,...z,children:o})}));("function"==typeof m.default||"object"==typeof m.default&&null!==m.default)&&void 0===m.default.__esModule&&(Object.defineProperty(m.default,"__esModule",{value:!0}),Object.assign(m.default,m),e.exports=m.default)}(e,e.exports);
//# sourceMappingURL=link.js.map
