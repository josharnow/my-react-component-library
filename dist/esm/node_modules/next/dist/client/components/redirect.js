"use strict";
import{r as e}from"../../../../../_virtual/redirect.js";import"./request-async-storage.external.js";import"./action-async-storage.external.js";import"./redirect-status-code.js";import{r as t}from"../../../../../_virtual/request-async-storage.external.js";import{a as r}from"../../../../../_virtual/action-async-storage.external.js";import{r as o}from"../../../../../_virtual/redirect-status-code.js";!function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(n,{RedirectType:function(){return a},getRedirectError:function(){return d},getRedirectStatusCodeFromError:function(){return y},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return g},isRedirectError:function(){return p},permanentRedirect:function(){return l},redirect:function(){return f}});const i=t.exports,s=r.exports,u=o.exports,c="NEXT_REDIRECT";var a;function d(e,t,r){void 0===r&&(r=u.RedirectStatusCode.TemporaryRedirect);const o=new Error(c);o.digest=c+";"+t+";"+e+";"+r+";";const n=i.requestAsyncStorage.getStore();return n&&(o.mutableCookies=n.mutableCookies),o}function f(e,t){void 0===t&&(t="replace");const r=s.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?u.RedirectStatusCode.SeeOther:u.RedirectStatusCode.TemporaryRedirect)}function l(e,t){void 0===t&&(t="replace");const r=s.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?u.RedirectStatusCode.SeeOther:u.RedirectStatusCode.PermanentRedirect)}function p(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;const[t,r,o,n]=e.digest.split(";",4),i=Number(n);return t===c&&("replace"===r||"push"===r)&&"string"==typeof o&&!isNaN(i)&&i in u.RedirectStatusCode}function g(e){return p(e)?e.digest.split(";",3)[2]:null}function m(e){if(!p(e))throw new Error("Not a redirect error");return e.digest.split(";",2)[1]}function y(e){if(!p(e))throw new Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}!function(e){e.push="push",e.replace="replace"}(a||(a={})),("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)}(e,e.exports);
//# sourceMappingURL=redirect.js.map
